<script src='https://d3js.org/d3.v7.min.js'></script>
<script>
    let heartfailurecsv = 'https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv';

    d3.csv(heartfailurecsv).then(function (data) {

        let heart_failure_between_1_and_30 = 0;
        let heart_failure_between_31_and_40 = 0;
        let heart_failure_between_41_and_60 = 0;
        let heart_failure_between_61_and_100 = 0;

        for (let i = 0; i < data.length; i++) {
            //Count age ranges
            if (data[i].age <= 30) {
                heart_failure_between_1_and_30++;
            } else if (data[i].age >= 31 && data[i].age <= 40) {
                heart_failure_between_31_and_40++;
            } else if (data[i].age >= 41 && data[i].age <= 60) {
                heart_failure_between_41_and_60++;
            } else if (data[i].age >= 61 && data[i].age <= 100) {
                heart_failure_between_61_and_100++;
            }
        }

        //create array
        let heart_failure_age_array =
            [heart_failure_between_1_and_30,
                heart_failure_between_31_and_40,
                heart_failure_between_41_and_60,
                heart_failure_between_61_and_100]
        console.log(heart_failure_age_array);

        //Display array
        d3.select("body")
            .selectAll("p")
            .data(heart_failure_age_array)
            .enter()
            .append("p")
            .text(function (d, i) {
                return d;
            })
    });

</script>